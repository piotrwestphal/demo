(this["webpackJsonpsport-data-webapp"]=this["webpackJsonpsport-data-webapp"]||[]).push([[0],{320:function(e,t,n){},458:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(14),o=n.n(c),i=(n(320),n(530)),s=n(529),u=n(291),l=n(541),j=n(511),d=n(512),m=n(513),b=n(514),h=n(21),f=n(62),g=n.n(f),p=n(98),O=n(34),v=n(533),k=n(508),x=n(542),y=n(509),P=n(510),I=n(460),S=n(248),w=n(17),C=n(249),z=n.n(C),N={"Content-Type":"application/json"},T=function(e){return Object(h.a)(Object(h.a)({},N),{},{Authorization:"Bearer ".concat(e)})},A=function(e,t,n){return fetch("".concat(e).concat(t),{method:"GET",headers:T(n)}).then((function(e){return e.ok?e.json():Promise.reject()}))},F=function(e,t,n){return A(e,"/GetByConditions/".concat(t),n)},M="".concat("https://ticketapi.sportdata.pl","/api/v1"),B="".concat(M,"/Authorization/Authenticate"),W="".concat(M,"/ticketManagement/Bookings"),E="".concat(M,"/ticketManagement/Customers"),L="".concat(M,"/ticketManagement/Events"),G=("".concat(M,"/ticketManagement/Seats"),"".concat(M,"/ticketManagement/Tickets")),J=n(8),D=Object(u.a)((function(e){return Object(l.a)({root:{display:"flex",height:e.spacing(8)},input:{},button:{fontWeight:"bold",height:e.spacing(6),marginLeft:e.spacing(2)}})})),K=function(){var e=D(),t=Object(w.g)(),n=Object(r.useState)({error:"",loading:!1,ticketCode:""}),a=Object(O.a)(n,2),c=a[0],o=c.error,i=c.loading,s=c.ticketCode,u=a[1],l=Object(r.useCallback)((function(e){1===e.length?t.push({pathname:"/ticket-info/".concat(e[0].id,"/show")}):t.push({pathname:"/ticket-info",search:Object(S.stringify)({filter:JSON.stringify({ticketCode:s})})})}),[t,s]),j=Object(r.useCallback)(Object(p.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),n='t=>t.TicketCode=="'.concat(s,'"'),e.abrupt("return",F(G,n,t));case 3:case"end":return e.stop()}}),e)}))),[s]),d=function(){var e=Object(p.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=9;break}return u((function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!0,error:""})})),e.next=4,j();case 4:t=e.sent,u((function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!1})})),t.length?l(t):u((function(e){return Object(h.a)(Object(h.a)({},e),{},{error:"Nie ma biletu o takim kodzie"})})),e.next=10;break;case 9:u((function(e){return Object(h.a)(Object(h.a)({},e),{},{error:"Input required"})}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(J.jsxs)(v.a,{className:e.root,children:[Object(J.jsxs)(k.a,{className:e.input,disabled:i,children:[Object(J.jsx)(x.a,{children:"Kod biletu"}),Object(J.jsx)(y.a,{error:!!o.length,onInput:function(e){u((function(t){return Object(h.a)(Object(h.a)({},t),{},{ticketCode:e.target.value})}))}}),!!o.length&&Object(J.jsx)(P.a,{error:!0,children:o})]}),Object(J.jsx)(I.a,{className:e.button,variant:"contained",color:"primary",disabled:i,onClick:d,children:Object(J.jsx)(z.a,{})})]})},V=Object(u.a)((function(e){return Object(l.a)({header:{textAlign:"center",letterSpacing:e.spacing(.2)}})})),Z=function(){var e=V();return Object(J.jsxs)(j.a,{container:!0,spacing:1,children:[Object(J.jsx)(j.a,{item:!0,xs:12,children:Object(J.jsx)(d.a,{children:Object(J.jsx)(m.a,{className:e.header,title:"Witaj w aplikacji administracyjne Sport Data"})})}),Object(J.jsx)(j.a,{item:!0,sm:6,xs:12,children:Object(J.jsxs)(d.a,{children:[Object(J.jsx)(m.a,{title:"Znajd\u017a u\u017cytkownika po kodzie biletu"}),Object(J.jsx)(b.a,{children:Object(J.jsx)(K,{})})]})})]})},q=n(138),H=n(515),R=n(154),U=Object(h.a)(Object(h.a)({},q.a),{},{palette:{primary:H.a,secondary:R.a},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Arial","sans-serif"].join(","),body1:{fontWeight:300},body2:{fontWeight:300},h5:{fontWeight:200}}}),Q=n(250),X=function(e){return new Map(e.map((function(e){return[e.id,e]})))},Y=function(e,t,n){var r=e.firstname,a=e.lastname,c=e.pesel,o=t.name;return{id:n.id,firstname:r,lastname:a,pesel:c,eventName:o,ticketCode:n.ticketCode,ticketType:n.ticketType}},$=function(e,t,n,r){var a=X(e),c=X(t),o=X(n);return r.map((function(e){var t=a.get(e.bookingId),n=t.customerId,r=t.eventId,i=c.get(n),s=o.get(r);return Y(i,s,e)}))},_=n(252),ee=function(e,t,n){var r=function(e){return Array.from(new Set(e))}(t);return F(e,function(e){var t=Object(_.a)(e),n=t[0];return(t.slice(1)||[]).reduce((function(e,t){return"".concat(e,"||v.Id==").concat(t)}),"v=>v.Id==".concat(n))}(r),n)},te={getList:function(){var e=Object(p.a)(g.a.mark((function e(t,n){var r,a,c,o,i,s,u,l,j,d,m,b,h,f,p;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.filter,a=localStorage.getItem("token"),c='t=>t.TicketCode=="'.concat(r.ticketCode,'"'),e.next=5,F(G,c,a);case 5:return o=e.sent,i=o.map((function(e){return e.bookingId})),e.next=9,ee(W,i,a);case 9:return s=e.sent,u=s.map((function(e){return e.customerId})),l=s.map((function(e){return e.eventId})),j=ee(E,u,a),d=ee(L,l,a),e.next=16,Promise.all([j,d]);case 16:return m=e.sent,b=Object(O.a)(m,2),h=b[0],f=b[1],p=$(s,h,f,o),e.abrupt("return",Promise.resolve({data:p,total:p.length}));case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(p.a)(g.a.mark((function e(t,n){var r,a,c,o,i,s,u,l,j,d,m,b;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,a=localStorage.getItem("token"),e.next=4,A(G,"/".concat(r),a);case 4:return c=e.sent,e.next=7,A(W,"/".concat(c.bookingId),a);case 7:return o=e.sent,i=o.customerId,s=o.eventId,e.next=12,A(E,"/".concat(i),a);case 12:return u=e.sent,e.next=15,A(L,"/".concat(s),a);case 15:return l=e.sent,e.next=18,Promise.all([u,l]);case 18:return j=e.sent,d=Object(O.a)(j,2),m=d[0],b=d[1],e.abrupt("return",{data:Y(m,b,c)});case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},ne=function(){return{login:function(e){var t,n,r=e.username,a=e.password;return(t=B,n={login:r,password:a},fetch(t,{method:"POST",body:JSON.stringify(n),headers:N}).then((function(e){return e.ok?e.json():Promise.reject()}))).then((function(e){var t=e.token;localStorage.setItem("username",r),localStorage.setItem("token",t)}))},logout:function(){return localStorage.removeItem("username"),localStorage.removeItem("token"),Promise.resolve()},checkError:function(e){var t=e.status;return 401===t||403===t?(localStorage.removeItem("username"),localStorage.removeItem("token"),Promise.reject()):Promise.resolve()},checkAuth:function(){return localStorage.getItem("token")?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.resolve()},getIdentity:function(){return Promise.resolve({id:"user",fullName:localStorage.getItem("username")})}}},re=n(516),ae=n(532),ce=n(539),oe=n(531),ie=n(156),se=n(517),ue=function(){var e=Object(re.a)().filterValues.ticketCode;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(v.a,{m:2,children:Object(J.jsxs)(ie.a,{variant:"h5",paragraph:!0,children:["Wyszukiwanie biletu o kodzie: ",e]})}),Object(J.jsx)(se.a,{}),Object(J.jsxs)(ae.a,{rowClick:"show",children:[Object(J.jsx)(ce.a,{sortable:!1,source:"firstname"}),Object(J.jsx)(ce.a,{sortable:!1,source:"lastname"}),Object(J.jsx)(ce.a,{sortable:!1,source:"pesel"}),Object(J.jsx)(ce.a,{sortable:!1,source:"eventName"}),Object(J.jsx)(ce.a,{sortable:!1,source:"ticketCode"}),Object(J.jsx)(ce.a,{sortable:!1,source:"ticketType"})]})]})},le=function(e){var t=Object(w.h)().search;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(K,{}),!!t&&Object(J.jsx)(oe.a,Object(h.a)(Object(h.a)({actions:!1,pagination:!1},e),{},{children:Object(J.jsx)(ue,{})}))]})},je=n(534),de=n(535),me=n(540),be=function(){return Object(J.jsxs)(v.a,{display:"flex",justifyContent:"flex-end",children:[Object(J.jsx)(I.a,{disabled:!0,variant:"outlined",color:"primary",children:"Oznacz jako wykorzystane"}),Object(J.jsx)(I.a,{disabled:!0,variant:"outlined",color:"primary",children:"Zablokuj"})]})},he=function(e){return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(je.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(J.jsx)(de.a,{syncWithLocation:!1,children:Object(J.jsxs)(me.a,{label:"Ticket",children:[Object(J.jsx)(ce.a,{source:"firstname"}),Object(J.jsx)(ce.a,{source:"lastname"}),Object(J.jsx)(ce.a,{source:"pesel"}),Object(J.jsx)(ce.a,{source:"eventName"}),Object(J.jsx)(ce.a,{source:"ticketCode"}),Object(J.jsx)(ce.a,{source:"ticketType"})]})})})),Object(J.jsx)(be,{})]})},fe=function(){var e=function(e){switch(e){case"production":return{authProvider:ne(),dataProvider:te};case"development":return{authProvider:{login:function(e){var t=e.username;return localStorage.setItem("username",t),Promise.resolve()},logout:function(){return localStorage.removeItem("username"),Promise.resolve()},checkError:function(e){var t=e.status;return 401===t||403===t?(localStorage.removeItem("username"),Promise.reject()):Promise.resolve()},checkAuth:function(){return localStorage.getItem("username")?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.resolve()},getIdentity:function(){return Promise.resolve({id:"user",fullName:localStorage.getItem("username")})}},dataProvider:te};default:return{authProvider:{login:function(){return Promise.resolve()},logout:function(){return Promise.resolve()},checkError:function(){return Promise.resolve()},checkAuth:function(){return Promise.resolve()},getPermissions:function(){return Promise.resolve()},getIdentity:function(){return Promise.resolve({id:"no-auth",fullName:"no-auth"})}},dataProvider:Object(Q.a)({users:[{id:1,name:"Leanne Graham",username:"Bret",email:"Sincere@april.biz",address:{street:"Kulas Light",suite:"Apt. 556",city:"Gwenborough",zipcode:"92998-3874",geo:{lat:"-37.3159",lng:"81.1496"}},phone:"1-770-736-8031 x56442",website:"hildegard.org",company:{name:"Romaguera-Crona",catchPhrase:"Multi-layered client-server neural-net",bs:"harness real-time e-markets"}},{id:2,name:"Ervin Howell",username:"Antonette",email:"Shanna@melissa.tv",address:{street:"Victor Plains",suite:"Suite 879",city:"Wisokyburgh",zipcode:"90566-7771",geo:{lat:"-43.9509",lng:"-34.4618"}},phone:"010-692-6593 x09125",website:"anastasia.net",company:{name:"Deckow-Crist",catchPhrase:"Proactive didactic contingency",bs:"synergize scalable supply-chains"}}]})}}}("production"),t=e.authProvider,n=e.dataProvider;return Object(J.jsx)(i.a,{theme:U,dashboard:Z,authProvider:t,dataProvider:n,children:Object(J.jsx)(s.a,{options:{label:"Bilety"},name:"ticket-info",list:le,show:he})})},ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,547)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(J.jsx)(a.a.StrictMode,{children:Object(J.jsx)(fe,{})}),document.getElementById("root")),ge()}},[[458,1,2]]]);
//# sourceMappingURL=main.70feb63e.chunk.js.map