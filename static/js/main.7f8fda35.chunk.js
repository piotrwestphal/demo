(this["webpackJsonpsport-data-webapp"]=this["webpackJsonpsport-data-webapp"]||[]).push([[0],{353:function(e,t,a){},493:function(e,t,a){"use strict";a.r(t);var i,n=a(0),c=a.n(n),r=a(16),o=a.n(r),s=(a(353),a(306)),d=a.n(s),l=a(574),u=a(573),b=a(211),m=a(584),j=a(554),k=a(555),O=a(556),p=a(557),f=a(27),g=a.n(f),T=a(40),v=a(19),I=a(151),A=a(142),h=a(35),N=a(269),x=a(17);!function(e){e.ACCESS_USINGS="access-usings",e.BOOKINGS="bookings",e.LOGS="logs",e.TICKETS="tickets",e.TICKET_DETAILS="ticket-details",e.TICKET_INFO="ticket-info"}(i||(i={}));var y,C=a(577),S=a(312),w=a(316),K=a(496),P=a(497),E=a(498),B=a(270),D=a.n(B),F=a(6),L=Object(b.a)((function(e){return Object(m.a)({root:{display:"flex",margin:e.spacing(1),height:e.spacing(8)},button:{fontWeight:"bold",height:e.spacing(6),marginLeft:e.spacing(2)}})})),z=function(e){var t=e.label,a=e.onValue,i=e.disabled,c=e.error,r=L(),o=Object(n.useState)(!1),s=Object(v.a)(o,2),d=s[0],l=s[1],u=Object(n.useState)(""),b=Object(v.a)(u,2),m=b[0],j=b[1],k=function(){m?(l(!1),a(m)):l(!0)};return Object(F.jsxs)(C.a,{className:r.root,children:[Object(F.jsxs)(S.a,{disabled:i,children:[Object(F.jsx)(w.a,{children:t}),Object(F.jsx)(K.a,{error:d||!!c,onInput:function(e){j(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&k()}}),d&&Object(F.jsx)(P.a,{error:!0,children:"Pole jest wymagane"}),!!c&&Object(F.jsx)(P.a,{error:!0,children:c})]}),Object(F.jsx)(E.a,{className:r.button,variant:"contained",color:"primary",disabled:i,onClick:k,children:Object(F.jsx)(D.a,{})})]})},U=function(){var e=Object(x.g)(),t=Object(I.a)(),a=Object(n.useState)(""),c=Object(v.a)(a,2),r=c[0],o=c[1],s=Object(A.a)(),d=Object(v.a)(s,2),l=d[0],u=d[1].loading,b=Object(n.useCallback)((function(e){return l({type:Object(h.n)(h.d),resource:i.TICKETS,payload:{filter:{ticketCode:e}}},{returnPromise:!0})}),[l]),m=Object(n.useCallback)(function(){var a=Object(T.a)(g.a.mark((function a(n){var c,r,s,d;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o(""),a.prev=1,a.next=4,b(n);case 4:c=a.sent,r=c.total,s=Object(v.a)(c.data,1),d=s[0],r?1===r?e.push({pathname:"/".concat(i.TICKET_DETAILS,"/").concat(d.bookingId,"/show")}):e.push({pathname:"/".concat(i.TICKET_INFO),search:Object(N.stringify)({filter:JSON.stringify({ticketCode:n})})}):o("Nie ma biletu o takim kodzie"),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t(null===a.t0||void 0===a.t0?void 0:a.t0.message,"error");case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}(),[b,e,t]);return Object(F.jsx)(z,{label:"Kod biletu",onValue:m,disabled:u,error:r})},M=Object(b.a)((function(e){return Object(m.a)({header:{textAlign:"center",letterSpacing:e.spacing(.2)}})})),R=function(){var e=M();return Object(F.jsxs)(j.a,{container:!0,spacing:1,children:[Object(F.jsx)(j.a,{item:!0,xs:12,children:Object(F.jsx)(k.a,{children:Object(F.jsx)(O.a,{className:e.header,title:"Witaj w aplikacji administracyjnej Sport Data"})})}),Object(F.jsx)(j.a,{item:!0,sm:6,xs:12,children:Object(F.jsxs)(k.a,{children:[Object(F.jsx)(O.a,{title:"Znajd\u017a u\u017cytkownika po kodzie biletu"}),Object(F.jsx)(p.a,{children:Object(F.jsx)(U,{})})]})})]})},Z=a(26),G=a(156),_=a(558),J=a(170),W=Object(Z.a)(Object(Z.a)({},G.a),{},{palette:{primary:_.a,secondary:J.a},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Arial","sans-serif"].join(","),body1:{fontWeight:300},body2:{fontWeight:300},h5:{fontWeight:200}}}),V=a(7);!function(e){e.K="K",e.M="M",e.Z="Z",e.N="N",e.P="P",e.U="U",e.R="R"}(y||(y={}));var H,X,q=[{id:1,ticketCode:"A",ticketType:y.K,active:!0,bookingId:52815,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:2,ticketCode:"A",ticketType:y.K,active:!0,bookingId:52816,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:3,ticketCode:"010000011492",ticketType:y.K,active:!0,bookingId:52817,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:4,ticketCode:"411000006572",ticketType:y.K,active:!0,bookingId:52818,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:5,ticketCode:"871000006824",ticketType:y.K,active:!0,bookingId:52819,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:6,ticketCode:"370000011495",ticketType:y.K,active:!0,bookingId:52820,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:7,ticketCode:"450000011501",ticketType:y.K,active:!0,bookingId:52821,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:8,ticketCode:"630000011502",ticketType:y.K,active:!0,bookingId:52822,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:9,ticketCode:"020000011503",ticketType:y.K,active:!0,bookingId:52823,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:10,ticketCode:"310000011504",ticketType:y.K,active:!0,bookingId:52824,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"}],Q={getList:function(e,t){return Promise.resolve({data:q,total:q.length})}},Y=[{id:1,firstname:"Marek",lastname:"Pies",pesel:"47120554776",eventName:"Podbeskidzie Bielsko-Bia\u0142a Sparing",ticketCode:"1234567890",ticketType:y.K},{id:2,firstname:"Janek",lastname:"Kru\u017cganek",pesel:"47120554776",eventName:"POGO\u0143 SZCZECIN 20/21",ticketCode:"1234567890",ticketType:y.K},{id:3,firstname:"Wac\u0142aw",lastname:"Rymski",pesel:"9988711225",eventName:"POGO\u0143 SZCZECIN 20/21",ticketCode:"1234567890",ticketType:y.K},{id:4,firstname:"Mirka",lastname:"Korze\u0144",pesel:"56483978659",eventName:"POGO\u0143 SZCZECIN 20/21",ticketCode:"1234567890",ticketType:y.K},{id:5,firstname:"Tis",lastname:"Lomasz",pesel:"47120554776",eventName:"POGO\u0143 SZCZECIN 20/21",ticketCode:"1234567890",ticketType:y.K},{id:6,firstname:"Bogdana",lastname:"Jaruzelska",pesel:"47120554776",eventName:"POGO\u0143 SZCZECIN 20/21",ticketCode:"1234567890",ticketType:y.K},{id:7,firstname:"Jeremi",lastname:"Pomidor",pesel:"12345678900",eventName:"POGO\u0143 SZCZECIN 20/21",ticketCode:"1234567890",ticketType:y.K},{id:8,firstname:"Roman",lastname:"Zoman",pesel:"13243567890",eventName:"POGO\u0143 SZCZECIN 20/21",ticketCode:"1234567890",ticketType:y.K},{id:9,firstname:"Bacha",lastname:"Kaszalot",pesel:"98097612678",eventName:"POGO\u0143 SZCZECIN 20/21",ticketCode:"1234567890",ticketType:y.K},{id:10,firstname:"Jadwiga",lastname:"Og\xf3rek",pesel:"47120554776",eventName:"POGO\u0143 SZCZECIN 20/21",ticketCode:"1234567890",ticketType:y.K}],$={getList:function(e,t){return Promise.resolve({data:Y,total:Y.length})}};!function(e){e.NORMAL="NORMAL",e.AB="AB",e.INFIX="INFIX",e.SERVICE="SERVICE",e.POINTS="POINTS"}(H||(H={})),function(e){e.ADMIN="ADMIN",e.BAN="BAN",e.STORNO="STORNO",e.MISTAKE="MISTAKE"}(X||(X={}));var ee,te,ae,ie,ne=[{id:1,firstname:"Andrzej",lastname:"Nawrot",eventName:"Podbeskidzie Bielsko-Bia\u0142a Sparing",pesel:"72052000192",variantName:"Normalny E1x",bookingType:H.NORMAL,activeFrom:null,activeTo:null,tickets:[{id:56424,ticketCode:"060000020917",ticketType:y.K,active:!0,bookingId:55832,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:56425,ticketCode:"DDEAF42C",ticketType:y.M,active:!0,bookingId:55832,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"}],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054",bookingDisabled:X.STORNO},{id:2,firstname:"Andrzej",lastname:"Nawrot",eventName:"Podbeskidzie Bielsko-Bia\u0142a Sparing",pesel:"72052000192",variantName:"Normalny E1x",bookingType:H.NORMAL,activeFrom:null,activeTo:null,tickets:[{id:56459,ticketCode:"240000020972",ticketType:y.K,active:!0,bookingId:55852,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:56460,ticketCode:"DDEAF42C",ticketType:y.M,active:!0,bookingId:55852,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"}],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054",bookingDisabled:X.STORNO},{id:3,firstname:"Andrzej",lastname:"Nawrot",eventName:"Podbeskidzie Bielsko-Bia\u0142a Sparing",pesel:"72052000192",variantName:"Normalny E1x",bookingType:H.NORMAL,activeFrom:null,activeTo:null,tickets:[{id:56479,ticketCode:"370000020991",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[1393],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:56480,ticketCode:"DDEAF42C",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"}],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054",bookingDisabled:null},{id:4,firstname:"Andrzej",lastname:"Nawrot",eventName:"Podbeskidzie Bielsko-Bia\u0142a Sparing",pesel:"72052000192",variantName:"Normalny E1x",bookingType:H.NORMAL,activeFrom:null,activeTo:null,tickets:[{id:56479,ticketCode:"370000020991",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[1393],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:56480,ticketCode:"DDEAF42C",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"}],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054",bookingDisabled:null},{id:5,firstname:"Andrzej",lastname:"Nawrot",eventName:"Podbeskidzie Bielsko-Bia\u0142a Sparing",pesel:"72052000192",variantName:"Normalny E1x",bookingType:H.NORMAL,activeFrom:null,activeTo:null,tickets:[{id:56479,ticketCode:"370000020991",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[1393],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:56480,ticketCode:"DDEAF42C",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"}],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054",bookingDisabled:null},{id:6,firstname:"Andrzej",lastname:"Nawrot",eventName:"Podbeskidzie Bielsko-Bia\u0142a Sparing",pesel:"72052000192",variantName:"Normalny E1x",bookingType:H.NORMAL,activeFrom:null,activeTo:null,tickets:[{id:56479,ticketCode:"370000020991",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[1393],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:56480,ticketCode:"DDEAF42C",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"}],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054",bookingDisabled:null},{id:7,firstname:"Andrzej",lastname:"Nawrot",eventName:"Podbeskidzie Bielsko-Bia\u0142a Sparing",pesel:"72052000192",variantName:"Normalny E1x",bookingType:H.NORMAL,activeFrom:null,activeTo:null,tickets:[{id:56479,ticketCode:"370000020991",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[1393],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:56480,ticketCode:"DDEAF42C",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"}],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054",bookingDisabled:null},{id:8,firstname:"Andrzej",lastname:"Nawrot",eventName:"Podbeskidzie Bielsko-Bia\u0142a Sparing",pesel:"72052000192",variantName:"Normalny E1x",bookingType:H.NORMAL,activeFrom:null,activeTo:null,tickets:[{id:56479,ticketCode:"370000020991",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[1393],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:56480,ticketCode:"DDEAF42C",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"}],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054",bookingDisabled:null},{id:9,firstname:"Andrzej",lastname:"Nawrot",eventName:"Podbeskidzie Bielsko-Bia\u0142a Sparing",pesel:"72052000192",variantName:"Normalny E1x",bookingType:H.NORMAL,activeFrom:null,activeTo:null,tickets:[{id:56479,ticketCode:"370000020991",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[1393],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:56480,ticketCode:"DDEAF42C",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"}],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054",bookingDisabled:null},{id:10,firstname:"Andrzej",lastname:"Nawrot",eventName:"Podbeskidzie Bielsko-Bia\u0142a Sparing",pesel:"72052000192",variantName:"Normalny E1x",bookingType:H.NORMAL,activeFrom:null,activeTo:null,tickets:[{id:56479,ticketCode:"370000020991",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[1393],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"},{id:56480,ticketCode:"DDEAF42C",ticketType:y.K,active:!0,bookingId:55863,accessUsingsIds:[],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054"}],createdAt:"2021-07-15T08:50:27.2054",modifiedAt:"2021-07-15T08:50:27.2054",bookingDisabled:null}],ce={getOne:function(e,t){var a=t.id,i=ne.find((function(e){return"".concat(e.id)===a}));return i?Promise.resolve({data:i}):Promise.reject(new Error)}},re=a(243),oe=function(e){if(!e)return{total:null};var t=e.split(" ")[1].split("-"),a=t[0],i=t[1].split("/"),n=i[0],c=i[1];return{rangeFrom:parseInt(a,10),rangeTo:parseInt(n,10),total:parseInt(c,10)}},se={"Content-Type":"application/json"},de=function(){return Object(Z.a)(Object(Z.a)({},se),{},{Authorization:"Bearer ".concat(localStorage.getItem("token"))})},le=function(e,t){return re.a.fetchJson("".concat(e).concat(t),{method:"GET",headers:new Headers(de())}).then((function(e){return e.json}))},ue=function(e,t){return re.a.fetchJson("".concat(e).concat(t),{method:"GET",headers:new Headers(de())}).then((function(e){var t=e.headers,a=e.json;return Promise.resolve({data:a,range:oe(t.get("Content-Range"))})}))},be=function(e,t){return le(e,"/GetByConditions/".concat(t))},me="".concat("https://ticketapi.sportdata.pl","/api/v1"),je="".concat(me,"/Authorization/Authenticate"),ke="".concat(me,"/ticketManagement/Bookings"),Oe="".concat(me,"/ticketManagement/Customers"),pe="".concat(me,"/ticketManagement/Events"),fe="".concat(me,"/ticketManagement/Logs/GetExtendedLogByConditions"),ge="".concat(me,"/ticketManagement/Tickets"),Te="".concat(me,"/ticketManagement/Variants"),ve={getList:function(){var e=Object(T.a)(g.a.mark((function e(t,a){var i,n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.filter,n='t=>t.TicketCode=="'.concat(i.ticketCode,'"'),e.next=4,be(ge,n);case 4:return c=e.sent,e.abrupt("return",Promise.resolve({data:c,total:c.length}));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Ie={update:function(){var e=Object(T.a)(g.a.mark((function e(t,a){var i,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.data,e.next=3,t=ke,c=i,re.a.fetchJson(t,{method:"PATCH",body:JSON.stringify(c),headers:new Headers(de())}).then((function(e){return e.json}));case 3:return n=e.sent,e.abrupt("return",Promise.resolve({data:n}));case 5:case"end":return e.stop()}var t,c}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Ae={ticketCode:function(e){return'l=>l.TicketCode=="'.concat(e,'"')}},he={id:"l=>l.Id",date:"l=>l.Date",deviceName:"l=>l.Device.Name",ticketCode:"l=>l.TicketCode",bookingId:"l=>l.BookingId"},Ne=function(e){if(Object.keys(e).length){var t=Object(v.a)(Object.entries(e)[0],2),a=t[0],i=t[1];return function(e){return Ae[e]}(a)(i)}return"l=>true"},xe={getList:function(){var e=Object(T.a)(g.a.mark((function e(t,a){var i,n,c,r,o,s,d,l,u,b,m,j,k,O,p;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.filter,n=a.sort,c=n.field,r=n.order,o=a.pagination,s=o.page,d=o.perPage,l=Ne(i),(u=[]).push("sortBy=".concat(he[c])),u.push("sortOrder=".concat(r)),u.push("rangeFrom=".concat(s*d-d)),u.push("rangeTo=".concat(s*d)),b=u.reduce((function(e,t){return"".concat(e,"&").concat(t)}),"/".concat(l,"?")),e.next=10,ue(fe,b);case 10:return m=e.sent,j=m.data,k=m.range.total,O=j.map((function(e){return{id:e.id,date:e.date,deviceName:e.device.name,ticketCode:e.ticketCode,text:Object(v.a)(e.data,1)[0].text,bookingId:e.bookingId}})),p=function(e,t,a){return e.length-1===a?t*a+a:(t-1)*a+e.length},e.abrupt("return",Promise.resolve({data:O,total:k||p(O,s,d)}));case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},ye=(ee={},Object(V.a)(ee,i.ACCESS_USINGS,ve),Object(V.a)(ee,i.BOOKINGS,Ie),Object(V.a)(ee,i.LOGS,xe),Object(V.a)(ee,i.TICKETS,Q),Object(V.a)(ee,i.TICKET_INFO,$),Object(V.a)(ee,i.TICKET_DETAILS,ce),ee),Ce=function(e,t,a){return ye[t][Object(h.n)(e)](t,a)},Se={login:function(){return Promise.resolve()},logout:function(){return Promise.resolve()},checkError:function(){return Promise.resolve()},checkAuth:function(){return Promise.resolve()},getPermissions:function(){return Promise.resolve()},getIdentity:function(){return Promise.resolve({id:"no-auth",fullName:"no-auth"})}},we={login:function(e){var t,a,i=e.username,n=e.password;return(t=je,a={login:i,password:n},re.a.fetchJson(t,{method:"POST",body:JSON.stringify(a),headers:new Headers(se)}).then((function(e){return e.json}))).then((function(e){var t=e.token;localStorage.setItem("username",i),localStorage.setItem("token",t)}))},logout:function(){return localStorage.removeItem("username"),localStorage.removeItem("token"),Promise.resolve()},checkError:function(e){var t=e.status;return 401===t||403===t?(localStorage.removeItem("username"),localStorage.removeItem("token"),Promise.reject()):Promise.resolve()},checkAuth:function(){return localStorage.getItem("token")?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.resolve()},getIdentity:function(){return Promise.resolve({id:"user",fullName:localStorage.getItem("username")})}},Ke=function(e){return new Map(e.map((function(e){return[e.id,e]})))},Pe=function(e,t,a,i){var n=Ke(e),c=Ke(t),r=Ke(a);return i.map((function(e){var t=n.get(e.bookingId),a=t.customerId,i=t.eventId;return function(e,t,a){var i=e.firstname,n=e.lastname,c=e.pesel,r=t.name;return{id:a.bookingId,firstname:i,lastname:n,pesel:c,eventName:r,ticketCode:a.ticketCode,ticketType:a.ticketType}}(c.get(a),r.get(i),e)}))},Ee=a(274),Be=function(e){var t=Object(Ee.a)(e),a=t[0];return(t.slice(1)||[]).reduce((function(e,t){return"".concat(e,"||v.Id==").concat(t)}),"v=>v.Id==".concat(a))},De=function(e,t){var a=function(e){return Array.from(new Set(e))}(t);return be(e,Be(a))},Fe={getList:function(){var e=Object(T.a)(g.a.mark((function e(t,a){var i,n,c,r,o,s,d,l,u,b,m,j,k,O;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.filter,n='t=>t.TicketCode=="'.concat(i.ticketCode,'"'),e.next=4,be(ge,n);case 4:return c=e.sent,r=c.map((function(e){return e.bookingId})),e.next=8,De(ke,r);case 8:return o=e.sent,s=o.map((function(e){return e.customerId})),d=o.map((function(e){return e.eventId})),l=De(Oe,s),u=De(pe,d),e.next=15,Promise.all([l,u]);case 15:return b=e.sent,m=Object(v.a)(b,2),j=m[0],k=m[1],O=Pe(o,j,k,c),e.abrupt("return",Promise.resolve({data:O,total:O.length}));case 21:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Le={getList:function(){var e=Object(T.a)(g.a.mark((function e(t,a){var i,n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.filter,n='t=>t.TicketCode=="'.concat(i.ticketCode,'"'),e.next=4,be(ge,n);case 4:return c=e.sent,e.abrupt("return",Promise.resolve({data:c,total:c.length}));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},ze=function(e,t,a,i,n){var c=e.id,r=e.disabled,o=e.type,s=e.activeFrom,d=e.activeTo,l=e.createdAt,u=e.modifiedAt,b=t.firstname,m=t.lastname,j=t.pesel;return{id:c,firstname:b,lastname:m,eventName:a.name,pesel:j,variantName:i.name,bookingType:o,activeFrom:s,activeTo:d,tickets:n,createdAt:l,modifiedAt:u,bookingDisabled:r}},Ue={getOne:function(){var e=Object(T.a)(g.a.mark((function e(t,a){var i,n,c,r,o,s,d,l,u,b,m,j,k,O,p;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.id,e.next=3,le(ke,"/".concat(i));case 3:return n=e.sent,c=n.customerId,r=n.eventId,o=n.variantId,s=le(Oe,"/".concat(c)),d=le(pe,"/".concat(r)),l=le(Te,"/".concat(o)),u=be(ge,Be(n.ticketsIds)),e.next=11,Promise.all([s,d,l,u]);case 11:return b=e.sent,m=Object(v.a)(b,4),j=m[0],k=m[1],O=m[2],p=m[3],e.abrupt("return",{data:ze(n,j,k,O,p)});case 18:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Me=(te={},Object(V.a)(te,i.ACCESS_USINGS,ve),Object(V.a)(te,i.BOOKINGS,Ie),Object(V.a)(te,i.LOGS,xe),Object(V.a)(te,i.TICKETS,Le),Object(V.a)(te,i.TICKET_INFO,Fe),Object(V.a)(te,i.TICKET_DETAILS,Ue),te),Re=function(e,t,a){return Me[t][Object(h.n)(e)](t,a)},Ze=a(560),Ge=a(575),_e=a(559),Je=a(576),We=a(74),Ve=a(561),He=a(3),Xe=a(172),qe=["source"],Qe=function(e){var t=e.source,a=Object(He.a)(e,qe),i=Object(Xe.b)(),n=Object(Z.a)(Object(Z.a)({},i),{},Object(V.a)({},t,function(e,t){var a=e.substring(0,t),i=e.slice(-t),n=e.length-a.length-i.length;return"".concat(a).concat("*".repeat(n>0?n:0)).concat(i)}(i[t],2)));return Object(F.jsx)(_e.a,Object(Z.a)(Object(Z.a)({},a),{},{record:n,source:t}))},Ye=function(){var e=Object(Ze.a)(),t=e.loading,a=e.filterValues.ticketCode;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(C.a,{m:2,children:Object(F.jsxs)(We.a,{variant:"h5",paragraph:!0,children:["Wyszukiwanie biletu po kodzie: ",a]})}),Object(F.jsx)(Ve.a,{}),Object(F.jsxs)(Ge.a,{loaded:!t,rowClick:function(e){return"".concat(i.TICKET_DETAILS,"/").concat(e,"/show")},children:[Object(F.jsx)(_e.a,{label:"Imi\u0119",source:"firstname",sortable:!1}),Object(F.jsx)(_e.a,{label:"Nazwisko",source:"lastname",sortable:!1}),Object(F.jsx)(Qe,{label:"Pesel",source:"pesel",sortable:!1}),Object(F.jsx)(_e.a,{label:"Bilet",source:"ticketCode",sortable:!1}),Object(F.jsx)(_e.a,{label:"Wydarzenie",source:"eventName",sortable:!1})]})]})},$e=function(e){var t=Object(x.h)().search;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(U,{}),!!t&&Object(F.jsx)(Je.a,Object(Z.a)(Object(Z.a)({actions:!1,pagination:!1},e),{},{children:Object(F.jsx)(Ye,{})}))]})},et=a(570),tt=a(289),at=a(571),it=a(580),nt=a(579),ct=a(587),rt=a(586),ot=a(500),st=a(499);!function(e){e.BLOCK="BLOCK",e.UNBLOCK="UNBLOCK",e.DISABLED="DISABLED"}(ie||(ie={}));var dt,lt,ut=Object(b.a)((function(e){return Object(m.a)({button:{color:e.palette.common.white,marginLeft:e.spacing(1)}})})),bt=(ae={},Object(V.a)(ae,ie.BLOCK,{text:"Zablokuj bilet",params:X.ADMIN}),Object(V.a)(ae,ie.UNBLOCK,{text:"Odblokuj bilet",params:null}),Object(V.a)(ae,ie.DISABLED,{text:"Zablokuj bilet (N/A)",disabled:!0}),ae),mt=function(){var e=Object(et.a)().loading,t=Object(I.a)(),a=Object(A.a)(),c=Object(v.a)(a,2),r=c[0],o=c[1].loading,s=Object(Xe.b)(),d=s.id,l=s.bookingDisabled,u=Object(n.useState)(bt.DISABLED),b=Object(v.a)(u,2),m=b[0],j=b[1],k=ut(),O=Object(st.a)();Object(n.useEffect)((function(){null===l?j(bt.BLOCK):l===X.ADMIN?j(bt.UNBLOCK):j(bt.DISABLED)}),[l]);var p=function(){var e=Object(T.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r({type:Object(h.n)(h.h),resource:i.BOOKINGS,payload:{data:{id:d,disabled:m.params}}},{returnPromise:!0});case 3:O(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t(null===e.t0||void 0===e.t0?void 0:e.t0.message,"error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(E.a,{disabled:!0,className:k.button,variant:"contained",color:"secondary",onClick:function(){O()},children:"Oznacz dost\u0119p jako wykorzystany"}),Object(F.jsx)(E.a,{disabled:e||(null===m||void 0===m?void 0:m.disabled)||o,className:k.button,variant:"contained",color:"secondary",onClick:p,children:m.text})]})},jt=(dt={},Object(V.a)(dt,H.NORMAL,"Bilet pojedynczy"),Object(V.a)(dt,H.AB,"Abonament"),Object(V.a)(dt,H.INFIX,"Infix"),Object(V.a)(dt,H.POINTS,"Points"),Object(V.a)(dt,H.SERVICE,"Karta serwisowa"),dt),kt=(lt={},Object(V.a)(lt,y.K,"Kod kreskowy"),Object(V.a)(lt,y.M,"Nr mifare"),Object(V.a)(lt,y.Z,"Nr dowodu"),Object(V.a)(lt,y.N,"Nr biletu"),Object(V.a)(lt,y.P,"Pesel"),Object(V.a)(lt,y.U,"Nr unique (125k)"),Object(V.a)(lt,y.R,"Nr rejestracyjny"),lt),Ot=function(e){return kt[e]},pt=function(e){return jt[e]},ft=Object(b.a)((function(e){return Object(m.a)({header:{letterSpacing:e.spacing(.2)},ticketBox:{display:"flex",flexDirection:"column",padding:e.spacing(1),marginLeft:e.spacing(1)},ticketField:{padding:e.spacing(0),margin:e.spacing(0),marginBottom:e.spacing(.5)}})})),gt=function(){var e=ft(),t=Object(et.a)().record;return Object(F.jsx)(C.a,{m:2,children:Object(F.jsxs)(We.a,{className:e.header,variant:"h5",paragraph:!0,children:[null===t||void 0===t?void 0:t.firstname," ",null===t||void 0===t?void 0:t.lastname]})})},Tt=function(e){var t=e.mapper,a=e.source,i=t(Object(Xe.b)()[a]);return Object(F.jsx)(rt.a,{label:i})},vt=function(e){var t=e.label,a=ft(),i=(Object(Xe.b)().tickets||[]).map((function(e){var t=e.id,a=e.ticketType,i=e.createdAt;return{id:t,ticketCode:e.ticketCode,ticketType:Ot(a),createdAt:i}})).map((function(e){return Object(F.jsxs)(ot.a,{variant:"elevation",className:a.ticketBox,children:[Object(F.jsx)(tt.a,{className:a.ticketField,label:"id",children:Object(F.jsx)(_e.a,{className:a.ticketField,record:e,source:"id"})}),Object(F.jsx)(tt.a,{className:a.ticketField,label:"Kod biletu",children:Object(F.jsx)(_e.a,{className:a.ticketField,record:e,source:"ticketCode"})}),Object(F.jsx)(tt.a,{className:a.ticketField,label:"Typ wej\u015bci\xf3wki",children:Object(F.jsx)(rt.a,{label:e.ticketType,className:a.ticketField})}),Object(F.jsx)(tt.a,{className:a.ticketField,label:"Utworzono",children:Object(F.jsx)(at.a,{className:a.ticketField,record:e,source:"createdAt",showTime:!0})})]},e.id)}));return Object(F.jsx)(tt.a,{label:t,children:Object(F.jsx)(C.a,{display:"flex",flexWrap:"wrap",flexDirection:"row",children:i})})},It=function(e){return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(it.a,Object(Z.a)(Object(Z.a)({},e),{},{children:Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(gt,{}),Object(F.jsx)(Ve.a,{}),Object(F.jsx)(nt.a,{syncWithLocation:!1,children:Object(F.jsxs)(ct.a,{label:"Bilet",children:[Object(F.jsx)(_e.a,{label:"Impreza",source:"eventName"}),Object(F.jsx)(_e.a,{label:"Pesel",source:"pesel"}),Object(F.jsx)(_e.a,{label:"Wariant",source:"variantName"}),Object(F.jsx)(tt.a,{label:"Rodzaj wej\u015bci\xf3wki",children:Object(F.jsx)(Tt,{source:"bookingType",mapper:pt})}),Object(F.jsx)(at.a,{label:"Aktywny od",source:"activeFrom",emptyText:"N/A",showTime:!0}),Object(F.jsx)(at.a,{label:"Aktywny do",source:"activeTo",emptyText:"N/A",showTime:!0}),Object(F.jsx)(vt,{label:"Wej\u015bci\xf3wki:"}),Object(F.jsx)(at.a,{label:"Utworzono",source:"createdAt",showTime:!0}),Object(F.jsx)(at.a,{label:"Zmodyfikowano",source:"modifiedAt",showTime:!0})]})}),Object(F.jsx)(Ve.a,{}),Object(F.jsx)(C.a,{p:1,display:"flex",justifyContent:"flex-end",children:Object(F.jsx)(mt,{})})]})}))})},At=a(582),ht=a(578),Nt=a(308),xt=function(){return Object(F.jsxs)(Ge.a,{children:[Object(F.jsx)(at.a,{label:"Data",source:"date",showTime:!0}),Object(F.jsx)(_e.a,{label:"Urz\u0105dzenie",source:"deviceName"}),Object(F.jsx)(_e.a,{label:"Bilet",source:"ticketCode"}),Object(F.jsx)(_e.a,{label:"Opis",source:"text",sortable:!1}),Object(F.jsx)(_e.a,{label:"Rezerwacja",source:"bookingId"})]})},yt=function(e){return Object(F.jsx)(At.a,Object(Z.a)(Object(Z.a)({},e),{},{children:Object(F.jsx)(ht.a,{source:"ticketCode",alwaysOn:!0})}))},Ct=function(e){return Object(F.jsx)(Je.a,Object(Z.a)(Object(Z.a)({perPage:20,actions:!1,pagination:Object(F.jsx)(Nt.a,{rowsPerPageOptions:[20,50,100]}),filters:Object(F.jsx)(yt,{})},e),{},{children:Object(F.jsx)(xt,{})}))},St=function(){var e=function(e){switch(e){case"production":case"development":return{authProvider:we,dataProvider:Re};default:return{authProvider:Se,dataProvider:Ce}}}("production"),t=e.authProvider,a=e.dataProvider;return Object(F.jsxs)(l.a,{theme:W,dashboard:R,authProvider:t,dataProvider:a,children:[Object(F.jsx)(u.a,{options:{label:"Bilety"},icon:d.a,name:i.TICKET_INFO,list:$e}),Object(F.jsx)(u.a,{options:{label:"Wej\u015bci\xf3wka"},name:i.TICKET_DETAILS,show:It}),Object(F.jsx)(u.a,{options:{label:"Logi"},name:i.LOGS,list:Ct})]})},wt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,589)).then((function(t){var a=t.getCLS,i=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),i(e),n(e),c(e),r(e)}))};o.a.render(Object(F.jsx)(c.a.StrictMode,{children:Object(F.jsx)(St,{})}),document.getElementById("root")),wt()}},[[493,1,2]]]);
//# sourceMappingURL=main.7f8fda35.chunk.js.map