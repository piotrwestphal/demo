{"version":3,"sources":["core/ResourceName.ts","core/enum/TicketType.ts","main/FindUserByTicket.tsx","main/Dashboard.tsx","custom.theme.ts","core/fake/fake-tickets.provider.ts","core/enum/BookingType.ts","core/enum/BookingDisabledOption.ts","core/fake/fake-ticket-info.provider.ts","core/fake/fake-ticket-details.provider.ts","core/fake/fake-data.provider.ts","core/fake/fake-auth.provider.ts","core/common/fetch.utils.ts","core/api-urls.ts","core/auth/auth.provider.ts","core/common/mapper.utils.ts","core/ticket-info/ticket-info.mapper.ts","core/common/condition.builder.ts","core/ticket-info/ticket-info.provider.ts","core/tickets/tickets-provider.ts","core/ticket-info/ticket-details.mapper.ts","core/ticket-info/ticket-details.provider.ts","core/data.provider.ts","main/common/MaskField.tsx","core/common/mask.utils.ts","main/TicketInfoList.tsx","main/AccessButtons.tsx","core/ticket-info/ticket-info-values.mapper.ts","main/TicketDetailsView.tsx","App.tsx","core/providers.factory.ts","reportWebVitals.ts","index.tsx"],"names":["ResourceName","TicketType","useStyles","makeStyles","theme","createStyles","root","display","margin","spacing","height","input","button","fontWeight","marginLeft","FindUserByTicket","dataProvider","useDataProvider","classes","history","useHistory","useState","error","loading","ticketCode","setState","navigate","useCallback","tickets","length","push","pathname","TICKET_INFO","bookingId","search","stringify","filter","JSON","handleClick","a","prevState","getList","TICKETS","total","data","Box","className","FormControl","disabled","InputLabel","Input","onInput","event","target","value","onKeyDown","ev","key","FormHelperText","Button","variant","color","onClick","header","textAlign","letterSpacing","Dashboard","Grid","container","item","xs","Card","CardHeader","title","sm","CardContent","customTheme","defaultTheme","palette","primary","deepPurple","secondary","green","typography","fontFamily","join","body1","body2","h5","BookingType","BookingDisabledOption","fakeTickets","id","ticketType","K","active","accessUsingsIds","createdAt","modifiedAt","provider","resource","params","Promise","resolve","fakeTicketInfoList","firstname","lastname","pesel","eventName","fakeTicketDetailsList","variantName","bookingType","NORMAL","activeFrom","activeTo","M","bookingDisabled","STORNO","getOne","found","find","v","reject","Error","dataProviders","fakeTicketsProvider","fakeTicketInfoProvider","TICKET_DETAILS","fakeTicketDetailsProvider","fetchType","sanitizeFetchType","authProvider","login","logout","checkError","checkAuth","getPermissions","getIdentity","fullName","baseHeaders","get","baseUrl","path","fetchUtils","fetchJson","method","headers","Headers","Authorization","localStorage","getItem","then","json","getByConditions","pathParam","API_V1","process","AUTH_URL","BOOKINGS_URL","CUSTOMERS_URL","EVENTS_URL","TICKETS_URL","VARIANTS_URL","url","body","username","password","token","setItem","removeItem","status","toMapById","values","Map","map","mapToTicketBaseInfoList","bookings","customers","events","bookingById","customerById","eventById","ticket","customerId","eventId","name","mapToTicketBaseInfo","buildFilterByIdsCondition","ids","firstId","reduce","prev","curr","getByUniqueIds","uniqueIds","Array","from","Set","toUniqueIds","filterByTicketCodeCondition","bookingIds","customerIds","eventIds","pendingCustomers","pendingEvents","all","ticketBaseInfoList","mapToTicketDetails","type","booking","variantId","pendingCustomer","pendingEvent","pendingVariant","pendingTickets","ticketsIds","customer","ticketsProvider","ticketInfoProvider","ticketDetailsProvider","MaskField","source","rest","record","useRecordContext","recordWithMappedValue","word","threshold","firstChars","substring","lastChars","slice","restCharsLength","repeat","maskMiddlePart","TextField","TicketList","useListContext","filterValues","m","Typography","paragraph","Divider","Datagrid","rowClick","label","sortable","TicketInfoList","props","useLocation","List","actions","pagination","common","white","AccessButtons","refresh","useRefresh","bookingTypeMapping","AB","INFIX","POINTS","SERVICE","ticketTypeMapping","Z","N","P","U","R","mapFromTicketType","mapFromBookingType","ticketBox","flexDirection","padding","ticketField","marginBottom","Header","useShowContext","MappedChipField","mapper","mappedValue","ChipField","TicketsField","fields","mappedRecord","Paper","Labeled","DateField","showTime","flexWrap","TicketDetailsView","Show","TabbedShowLayout","syncWithLocation","Tab","emptyText","p","justifyContent","App","env","fakeAuthProvider","fakeDataProvider","providersFactory","Admin","dashboard","Resource","options","icon","ReceiptIcon","list","show","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bb403536.chunk.js","sourcesContent":["export enum ResourceName {\n  TICKETS = 'tickets',\n  TICKET_INFO = 'ticket-info',\n  TICKET_DETAILS = 'ticket-details',\n}\n","export enum TicketType {\n  K = 'K',\n  M = 'M',\n  Z = 'Z',\n  N = 'N',\n  P = 'P',\n  U = 'U',\n  R = 'R',\n}\n","import {\n  Box,\n  Button,\n  createStyles,\n  FormControl,\n  FormHelperText,\n  Input,\n  InputLabel,\n  makeStyles,\n  Theme,\n} from '@material-ui/core'\nimport * as React from 'react'\nimport { ChangeEvent, useCallback, useState } from 'react'\nimport { useDataProvider } from 'react-admin'\nimport { stringify } from 'querystring'\nimport { useHistory } from 'react-router-dom'\nimport SearchIcon from '@material-ui/icons/Search'\nimport { TicketDto } from '../core/dto/ticket.dto'\nimport { TicketCodeFilter } from '../core/common/ticket-code.filter'\nimport { ResourceName } from '../core/ResourceName'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      margin: theme.spacing(1),\n      height: theme.spacing(8),\n    },\n    input: {},\n    button: {\n      fontWeight: 'bold',\n      height: theme.spacing(6),\n      marginLeft: theme.spacing(2),\n    },\n  }),\n)\n\n// TODO: https://marmelab.com/react-admin/Actions.html#usemutation-hook\nexport const FindUserByTicket = () => {\n  const dataProvider = useDataProvider()\n  const classes = useStyles()\n  const history = useHistory()\n\n  // TODO: add tickets to state and use effect\n  const [{ error, loading, ticketCode }, setState] = useState({\n    error: '',\n    loading: false,\n    ticketCode: '',\n  })\n\n  const navigate = useCallback(\n    (tickets: TicketDto[]) => {\n      if (tickets.length === 1) {\n        history.push({\n          pathname: `/${ResourceName.TICKET_INFO}/${tickets[0].bookingId}/show`,\n        })\n      } else {\n        history.push({\n          pathname: `/${ResourceName.TICKET_INFO}`,\n          search: stringify({\n            filter: JSON.stringify({\n              ticketCode,\n            } as TicketCodeFilter['filter']),\n          }),\n        })\n      }\n    },\n    [history, ticketCode],\n  )\n\n  const handleClick = async () => {\n    if (ticketCode) {\n      setState((prevState) => ({ ...prevState, loading: true, error: '' }))\n      const tickets = await dataProvider.getList<TicketDto>(\n        ResourceName.TICKETS,\n        { filter: { ticketCode } } as TicketCodeFilter,\n      )\n      setState((prevState) => ({ ...prevState, loading: false }))\n      // `tickets?` - there is some race condition when call will be 401/403 - and navigation may occur\n      if (tickets?.total) {\n        navigate(tickets.data)\n      } else {\n        setState((prevState) => ({\n          ...prevState,\n          error: 'Nie ma biletu o takim kodzie',\n        }))\n      }\n    } else {\n      setState((prevState) => ({ ...prevState, error: 'Pole wymagane' }))\n    }\n  }\n\n  const handleInput = (event: ChangeEvent<HTMLInputElement>) => {\n    setState((prevState) => ({ ...prevState, ticketCode: event.target.value }))\n  }\n\n  return (\n    <Box className={classes.root}>\n      <FormControl className={classes.input} disabled={loading}>\n        <InputLabel>Kod biletu</InputLabel>\n        <Input\n          error={!!error.length}\n          onInput={handleInput}\n          onKeyDown={(ev) => ev.key === 'Enter' && handleClick()}\n        />\n        {!!error.length && <FormHelperText error>{error}</FormHelperText>}\n      </FormControl>\n      <Button\n        className={classes.button}\n        variant=\"contained\"\n        color=\"primary\"\n        disabled={loading}\n        onClick={handleClick}\n      >\n        <SearchIcon />\n      </Button>\n    </Box>\n  )\n}\n","import {\n  Card,\n  CardContent,\n  CardHeader,\n  createStyles,\n  Grid,\n  makeStyles,\n  Theme,\n} from '@material-ui/core'\nimport * as React from 'react'\nimport { FindUserByTicket } from './FindUserByTicket'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    header: {\n      textAlign: 'center',\n      letterSpacing: theme.spacing(0.2),\n    },\n  }),\n)\n\nexport const Dashboard = () => {\n  const classes = useStyles()\n  return (\n    <Grid container spacing={1}>\n      <Grid item xs={12}>\n        <Card>\n          <CardHeader\n            className={classes.header}\n            title=\"Witaj w aplikacji administracyjnej Sport Data\"\n          />\n        </Card>\n      </Grid>\n      <Grid item sm={6} xs={12}>\n        <Card>\n          <CardHeader title=\"Znajdź użytkownika po kodzie biletu\" />\n          <CardContent>\n            <FindUserByTicket />\n          </CardContent>\n        </Card>\n      </Grid>\n    </Grid>\n  )\n}\n","import { defaultTheme } from 'react-admin'\nimport { deepPurple, green } from '@material-ui/core/colors'\nimport { ThemeOptions } from '@material-ui/core'\n\nexport const customTheme: ThemeOptions = {\n  ...defaultTheme,\n  palette: {\n    primary: deepPurple,\n    secondary: green,\n  },\n  typography: {\n    // Use the system font instead of the default Roboto font.\n    fontFamily: [\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Arial',\n      'sans-serif',\n    ].join(','),\n    body1: {\n      fontWeight: 300,\n    },\n    body2: {\n      fontWeight: 300,\n    },\n    h5: {\n      fontWeight: 200,\n    },\n  },\n}\n","import { DataProvider } from 'react-admin'\nimport { TicketDto } from '../dto/ticket.dto'\nimport { TicketType } from '../enum/TicketType'\n\nconst fakeTickets: TicketDto[] = [\n  {\n    id: 1,\n    ticketCode: 'A',\n    ticketType: TicketType.K,\n    active: true,\n    bookingId: 52815,\n    accessUsingsIds: [],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n  },\n  {\n    id: 2,\n    ticketCode: 'A',\n    ticketType: TicketType.K,\n    active: true,\n    bookingId: 52816,\n    accessUsingsIds: [],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n  },\n  {\n    id: 3,\n    ticketCode: '010000011492',\n    ticketType: TicketType.K,\n    active: true,\n    bookingId: 52817,\n    accessUsingsIds: [],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n  },\n  {\n    id: 4,\n    ticketCode: '411000006572',\n    ticketType: TicketType.K,\n    active: true,\n    bookingId: 52818,\n    accessUsingsIds: [],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n  },\n  {\n    id: 5,\n    ticketCode: '871000006824',\n    ticketType: TicketType.K,\n    active: true,\n    bookingId: 52819,\n    accessUsingsIds: [],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n  },\n  {\n    id: 6,\n    ticketCode: '370000011495',\n    ticketType: TicketType.K,\n    active: true,\n    bookingId: 52820,\n    accessUsingsIds: [],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n  },\n  {\n    id: 7,\n    ticketCode: '450000011501',\n    ticketType: TicketType.K,\n    active: true,\n    bookingId: 52821,\n    accessUsingsIds: [],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n  },\n  {\n    id: 8,\n    ticketCode: '630000011502',\n    ticketType: TicketType.K,\n    active: true,\n    bookingId: 52822,\n    accessUsingsIds: [],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n  },\n  {\n    id: 9,\n    ticketCode: '020000011503',\n    ticketType: TicketType.K,\n    active: true,\n    bookingId: 52823,\n    accessUsingsIds: [],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n  },\n  {\n    id: 10,\n    ticketCode: '310000011504',\n    ticketType: TicketType.K,\n    active: true,\n    bookingId: 52824,\n    accessUsingsIds: [],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n  },\n]\n\nconst provider = {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getList: (resource, params) =>\n    Promise.resolve({ data: fakeTickets, total: fakeTickets.length }),\n} as DataProvider\n\nexport default provider\n","export enum BookingType {\n  NORMAL = 'NORMAL',\n  AB = 'AB',\n  INFIX = 'INFIX',\n  SERVICE = 'SERVICE',\n  POINTS = 'POINTS',\n}\n","export enum BookingDisabledOption {\n  ADMIN = 'ADMIN',\n  BAN = 'BAN',\n  STORNO = 'STORNO',\n  MISTAKE = 'MISTAKE',\n}\n","import { DataProvider } from 'react-admin'\nimport { TicketType } from '../enum/TicketType'\nimport { TicketInfo } from '../ticket-info/ticket-info'\n\nconst fakeTicketInfoList: TicketInfo[] = [\n  {\n    id: 1,\n    firstname: 'Marek',\n    lastname: 'Pies',\n    pesel: '47120554776',\n    eventName: 'POGOŃ SZCZECIN 20/21',\n    ticketCode: '1234567890',\n    ticketType: TicketType.K,\n  },\n  {\n    id: 2,\n    firstname: 'Janek',\n    lastname: 'Krużganek',\n    pesel: '47120554776',\n    eventName: 'POGOŃ SZCZECIN 20/21',\n    ticketCode: '1234567890',\n    ticketType: TicketType.K,\n  },\n  {\n    id: 3,\n    firstname: 'Wacław',\n    lastname: 'Rymski',\n    pesel: '9988711225',\n    eventName: 'POGOŃ SZCZECIN 20/21',\n    ticketCode: '1234567890',\n    ticketType: TicketType.K,\n  },\n  {\n    id: 4,\n    firstname: 'Mirka',\n    lastname: 'Korzeń',\n    pesel: '56483978659',\n    eventName: 'POGOŃ SZCZECIN 20/21',\n    ticketCode: '1234567890',\n    ticketType: TicketType.K,\n  },\n  {\n    id: 5,\n    firstname: 'Tis',\n    lastname: 'Lomasz',\n    pesel: '47120554776',\n    eventName: 'POGOŃ SZCZECIN 20/21',\n    ticketCode: '1234567890',\n    ticketType: TicketType.K,\n  },\n  {\n    id: 6,\n    firstname: 'Bogdana',\n    lastname: 'Jaruzelska',\n    pesel: '47120554776',\n    eventName: 'POGOŃ SZCZECIN 20/21',\n    ticketCode: '1234567890',\n    ticketType: TicketType.K,\n  },\n  {\n    id: 7,\n    firstname: 'Jeremi',\n    lastname: 'Pomidor',\n    pesel: '12345678900',\n    eventName: 'POGOŃ SZCZECIN 20/21',\n    ticketCode: '1234567890',\n    ticketType: TicketType.K,\n  },\n  {\n    id: 8,\n    firstname: 'Roman',\n    lastname: 'Zoman',\n    pesel: '13243567890',\n    eventName: 'POGOŃ SZCZECIN 20/21',\n    ticketCode: '1234567890',\n    ticketType: TicketType.K,\n  },\n  {\n    id: 9,\n    firstname: 'Bacha',\n    lastname: 'Kaszalot',\n    pesel: '98097612678',\n    eventName: 'POGOŃ SZCZECIN 20/21',\n    ticketCode: '1234567890',\n    ticketType: TicketType.K,\n  },\n  {\n    id: 10,\n    firstname: 'Jadwiga',\n    lastname: 'Ogórek',\n    pesel: '47120554776',\n    eventName: 'POGOŃ SZCZECIN 20/21',\n    ticketCode: '1234567890',\n    ticketType: TicketType.K,\n  },\n]\n\nconst provider = {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getList: (resource, params) =>\n    Promise.resolve({\n      data: fakeTicketInfoList,\n      total: fakeTicketInfoList.length,\n    }),\n} as DataProvider\n\nexport default provider\n","import { DataProvider } from 'react-admin'\nimport { TicketType } from '../enum/TicketType'\nimport { TicketDetails } from '../ticket-info/ticket-details'\nimport { BookingType } from '../enum/BookingType'\nimport { BookingDisabledOption } from '../enum/BookingDisabledOption'\n\nconst fakeTicketDetailsList: TicketDetails[] = [\n  {\n    id: 1,\n    firstname: 'Andrzej',\n    lastname: 'Nawrot',\n    eventName: 'Podbeskidzie Bielsko-Biała Sparing',\n    pesel: '72052000192',\n    variantName: 'Normalny E1x',\n    bookingType: BookingType.NORMAL,\n    activeFrom: null,\n    activeTo: null,\n    tickets: [\n      {\n        id: 56424,\n        ticketCode: '060000020917',\n        ticketType: TicketType.K,\n        active: true,\n        bookingId: 55832,\n        accessUsingsIds: [],\n        createdAt: '2021-07-15T08:50:27.2054Z',\n        modifiedAt: '2021-07-15T08:50:27.2054Z',\n      },\n      {\n        id: 56425,\n        ticketCode: 'DDEAF42C',\n        ticketType: TicketType.M,\n        active: true,\n        bookingId: 55832,\n        accessUsingsIds: [],\n        createdAt: '2021-07-15T08:50:27.2054Z',\n        modifiedAt: '2021-07-15T08:50:27.2054Z',\n      },\n    ],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n    bookingDisabled: BookingDisabledOption.STORNO,\n  },\n  {\n    id: 2,\n    firstname: 'Andrzej',\n    lastname: 'Nawrot',\n    eventName: 'Podbeskidzie Bielsko-Biała Sparing',\n    pesel: '72052000192',\n    variantName: 'Normalny E1x',\n    bookingType: BookingType.NORMAL,\n    activeFrom: null,\n    activeTo: null,\n    tickets: [\n      {\n        id: 56459,\n        ticketCode: '240000020972',\n        ticketType: TicketType.K,\n        active: true,\n        bookingId: 55852,\n        accessUsingsIds: [],\n        createdAt: '2021-07-15T08:50:27.2054Z',\n        modifiedAt: '2021-07-15T08:50:27.2054Z',\n      },\n      {\n        id: 56460,\n        ticketCode: 'DDEAF42C',\n        ticketType: TicketType.M,\n        active: true,\n        bookingId: 55852,\n        accessUsingsIds: [],\n        createdAt: '2021-07-15T08:50:27.2054Z',\n        modifiedAt: '2021-07-15T08:50:27.2054Z',\n      },\n    ],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n    bookingDisabled: BookingDisabledOption.STORNO,\n  },\n  {\n    id: 3,\n    firstname: 'Andrzej',\n    lastname: 'Nawrot',\n    eventName: 'Podbeskidzie Bielsko-Biała Sparing',\n    pesel: '72052000192',\n    variantName: 'Normalny E1x',\n    bookingType: BookingType.NORMAL,\n    activeFrom: null,\n    activeTo: null,\n    tickets: [\n      {\n        id: 56479,\n        ticketCode: '370000020991',\n        ticketType: TicketType.K,\n        active: true,\n        bookingId: 55863,\n        accessUsingsIds: [1393],\n        createdAt: '2021-07-15T08:50:27.2054Z',\n        modifiedAt: '2021-07-15T08:50:27.2054Z',\n      },\n      {\n        id: 56480,\n        ticketCode: 'DDEAF42C',\n        ticketType: TicketType.K,\n        active: true,\n        bookingId: 55863,\n        accessUsingsIds: [],\n        createdAt: '2021-07-15T08:50:27.2054Z',\n        modifiedAt: '2021-07-15T08:50:27.2054Z',\n      },\n    ],\n    createdAt: '2021-07-15T08:50:27.2054Z',\n    modifiedAt: '2021-07-15T08:50:27.2054Z',\n    bookingDisabled: null,\n  },\n]\n\nconst provider = {\n  getOne: (resource, { id }: { id: string }) => {\n    const found = fakeTicketDetailsList.find((v) => `${v.id}` === id)\n    if (found) {\n      return Promise.resolve({\n        data: found,\n      })\n    }\n    return Promise.reject(new Error())\n  },\n} as DataProvider\n\nexport default provider\n","import { DataProvider, sanitizeFetchType } from 'react-admin'\nimport { ResourceName } from '../ResourceName'\nimport fakeTicketsProvider from './fake-tickets.provider'\nimport fakeTicketInfoProvider from './fake-ticket-info.provider'\nimport fakeTicketDetailsProvider from './fake-ticket-details.provider'\n\nconst dataProviders: Record<ResourceName, DataProvider> = {\n  [ResourceName.TICKETS]: fakeTicketsProvider,\n  [ResourceName.TICKET_INFO]: fakeTicketInfoProvider,\n  [ResourceName.TICKET_DETAILS]: fakeTicketDetailsProvider,\n}\n\nexport default (\n  fetchType: string,\n  resource: string,\n  params: unknown,\n): Promise<unknown> => {\n  const selectedProvider = dataProviders[resource as ResourceName]\n  const type = sanitizeFetchType(fetchType)\n  return selectedProvider[type](resource, params)\n}\n","import { AuthProvider } from 'react-admin'\n\nconst authProvider: AuthProvider = {\n  login: () => Promise.resolve(),\n  logout: () => Promise.resolve(),\n  checkError: () => Promise.resolve(),\n  checkAuth: () => Promise.resolve(),\n  getPermissions: () => Promise.resolve(),\n  getIdentity: () =>\n    Promise.resolve({\n      id: 'no-auth',\n      fullName: 'no-auth',\n    }),\n}\n\nexport default authProvider\n","import { fetchUtils } from 'react-admin'\n\nconst getToken = () => localStorage.getItem('token') as string\n\nconst baseHeaders: HeadersInit = {\n  'Content-Type': 'application/json',\n}\n\nconst authHeaders = (): HeadersInit => ({\n  ...baseHeaders,\n  Authorization: `Bearer ${getToken()}`,\n})\n\nexport const get = <T>(baseUrl: string, path: string) =>\n  fetchUtils\n    .fetchJson(`${baseUrl}${path}`, {\n      method: 'GET',\n      headers: new Headers(authHeaders()),\n    })\n    .then(({ json }) => json as Promise<T>)\n\nexport const getByConditions = <T>(\n  baseUrl: string,\n  pathParam: string,\n): Promise<T[]> => get<T[]>(baseUrl, `/GetByConditions/${pathParam}`)\n\nexport const authPost = <T, K>(url: string, body: T) =>\n  fetchUtils\n    .fetchJson(url, {\n      method: 'POST',\n      body: JSON.stringify(body),\n      headers: new Headers(baseHeaders),\n    })\n    .then(({ json }) => json as Promise<K>)\n","const API_V1 = `${process.env.REACT_APP_API_BASE_URL}/api/v1`\nexport const AUTH_URL = `${API_V1}/Authorization/Authenticate`\nexport const BOOKINGS_URL = `${API_V1}/ticketManagement/Bookings`\nexport const CUSTOMERS_URL = `${API_V1}/ticketManagement/Customers`\nexport const EVENTS_URL = `${API_V1}/ticketManagement/Events`\nexport const SEATS_URL = `${API_V1}/ticketManagement/Seats`\nexport const TICKETS_URL = `${API_V1}/ticketManagement/Tickets`\nexport const VARIANTS_URL = `${API_V1}/ticketManagement/Variants`\n","import { AuthProvider } from 'react-admin'\nimport { authPost } from '../common/fetch.utils'\nimport { AuthDto } from '../dto/auth.dto'\nimport { AUTH_URL } from '../api-urls'\nimport { AuthRequest } from '../request/auth.request'\n\nconst authProvider: AuthProvider = {\n  login: ({ username, password }) =>\n    authPost<AuthRequest, AuthDto>(AUTH_URL, {\n      login: username,\n      password,\n    }).then(({ token }) => {\n      localStorage.setItem('username', username)\n      localStorage.setItem('token', token)\n    }),\n  logout: () => {\n    localStorage.removeItem('username')\n    localStorage.removeItem('token')\n    return Promise.resolve()\n  },\n  checkError: ({ status }) => {\n    if (status === 401 || status === 403) {\n      localStorage.removeItem('username')\n      localStorage.removeItem('token')\n      return Promise.reject()\n    }\n    return Promise.resolve()\n  },\n  checkAuth: () =>\n    localStorage.getItem('token') ? Promise.resolve() : Promise.reject(),\n  getPermissions: () => Promise.resolve(),\n  getIdentity: () =>\n    Promise.resolve({\n      id: 'user',\n      fullName: localStorage.getItem('username') as string,\n    }),\n}\n\nexport default authProvider\n","export const toMapById = <T extends { id: number }>(values: T[]) =>\n  new Map(values.map((v): [number, T] => [v.id, v]))\n","import { CustomerDto } from '../dto/customer.dto'\nimport { EventDto } from '../dto/event.dto'\nimport { TicketDto } from '../dto/ticket.dto'\nimport { TicketInfo } from './ticket-info'\nimport { BookingDto } from '../dto/booking.dto'\nimport { toMapById } from '../common/mapper.utils'\n\nexport const mapToTicketBaseInfo = (\n  { firstname, lastname, pesel }: CustomerDto,\n  { name: eventName }: EventDto,\n  { bookingId, ticketCode, ticketType }: TicketDto,\n): TicketInfo => ({\n  id: bookingId,\n  firstname,\n  lastname,\n  pesel,\n  eventName,\n  ticketCode,\n  ticketType,\n})\n\nexport const mapToTicketBaseInfoList = (\n  bookings: BookingDto[],\n  customers: CustomerDto[],\n  events: EventDto[],\n  tickets: TicketDto[],\n): TicketInfo[] => {\n  const bookingById = toMapById(bookings)\n  const customerById = toMapById(customers)\n  const eventById = toMapById(events)\n  return tickets.map((ticket) => {\n    const { customerId, eventId } = bookingById.get(\n      ticket.bookingId,\n    ) as BookingDto\n    const customer = customerById.get(customerId) as CustomerDto\n    const event = eventById.get(eventId) as EventDto\n    return mapToTicketBaseInfo(customer, event, ticket)\n  })\n}\n","export const buildFilterByIdsCondition = (ids: number[]): string => {\n  const [firstId, ...restIds] = ids\n  return (restIds || []).reduce(\n    (prev, curr) => `${prev as string}||v.Id==${curr}`,\n    `v=>v.Id==${firstId}`,\n  )\n}\n","import { DataProvider, GetListResult } from 'react-admin'\nimport {\n  BOOKINGS_URL,\n  CUSTOMERS_URL,\n  EVENTS_URL,\n  TICKETS_URL,\n} from '../api-urls'\nimport { getByConditions } from '../common/fetch.utils'\nimport { BookingDto } from '../dto/booking.dto'\nimport { TicketInfo } from './ticket-info'\nimport { TicketDto } from '../dto/ticket.dto'\nimport { CustomerDto } from '../dto/customer.dto'\nimport { EventDto } from '../dto/event.dto'\nimport { mapToTicketBaseInfoList } from './ticket-info.mapper'\nimport { buildFilterByIdsCondition } from '../common/condition.builder'\nimport { TicketCodeFilter } from '../common/ticket-code.filter'\n\nconst toUniqueIds = (ids: number[]) => Array.from(new Set(ids))\n\nconst getByUniqueIds = <T>(baseUrl: string, ids: number[]): Promise<T[]> => {\n  const uniqueIds = toUniqueIds(ids)\n  return getByConditions<T>(baseUrl, buildFilterByIdsCondition(uniqueIds))\n}\n\nconst provider = {\n  getList: async (\n    resource: string,\n    { filter }: TicketCodeFilter,\n  ): Promise<GetListResult<TicketInfo>> => {\n    const filterByTicketCodeCondition = `t=>t.TicketCode==\"${filter.ticketCode}\"`\n    const tickets = await getByConditions<TicketDto>(\n      TICKETS_URL,\n      filterByTicketCodeCondition,\n    )\n\n    const bookingIds = tickets.map((v) => v.bookingId)\n    const bookings = await getByUniqueIds<BookingDto>(BOOKINGS_URL, bookingIds)\n\n    const customerIds = bookings.map((v) => v.customerId)\n    const eventIds = bookings.map((v) => v.eventId)\n\n    const pendingCustomers = getByUniqueIds<CustomerDto>(\n      CUSTOMERS_URL,\n      customerIds,\n    )\n    const pendingEvents = getByUniqueIds<EventDto>(EVENTS_URL, eventIds)\n    const [customers, events] = await Promise.all([\n      pendingCustomers,\n      pendingEvents,\n    ])\n\n    const ticketBaseInfoList = mapToTicketBaseInfoList(\n      bookings,\n      customers,\n      events,\n      tickets,\n    )\n    return Promise.resolve({\n      data: ticketBaseInfoList,\n      total: ticketBaseInfoList.length,\n    })\n  },\n} as DataProvider\n\nexport default provider\n","import { DataProvider, GetListResult } from 'react-admin'\nimport { TicketCodeFilter } from '../common/ticket-code.filter'\nimport { getByConditions } from '../common/fetch.utils'\nimport { TicketDto } from '../dto/ticket.dto'\nimport { TICKETS_URL } from '../api-urls'\n\nconst provider = {\n  getList: async (\n    resource: string,\n    { filter }: TicketCodeFilter,\n  ): Promise<GetListResult<TicketDto>> => {\n    const filterByTicketCodeCondition = `t=>t.TicketCode==\"${filter.ticketCode}\"`\n    const tickets = await getByConditions<TicketDto>(\n      TICKETS_URL,\n      filterByTicketCodeCondition,\n    )\n    return Promise.resolve({\n      data: tickets,\n      total: tickets.length,\n    })\n  },\n} as DataProvider\n\nexport default provider\n","import { CustomerDto } from '../dto/customer.dto'\nimport { EventDto } from '../dto/event.dto'\nimport { TicketDto } from '../dto/ticket.dto'\nimport { VariantDto } from '../dto/variant.dto'\nimport { TicketDetails } from './ticket-details'\nimport { BookingDto } from '../dto/booking.dto'\n\nexport const mapToTicketDetails = (\n  {\n    id: bookingId,\n    disabled: bookingDisabled,\n    type: bookingType,\n    activeFrom,\n    activeTo,\n    createdAt,\n    modifiedAt,\n  }: BookingDto,\n  { firstname, lastname, pesel }: CustomerDto,\n  { name: eventName }: EventDto,\n  { name: variantName }: VariantDto,\n  tickets: TicketDto[],\n): TicketDetails => ({\n  id: bookingId,\n  firstname,\n  lastname,\n  eventName,\n  pesel,\n  variantName,\n  bookingType,\n  activeFrom,\n  activeTo,\n  tickets,\n  createdAt,\n  modifiedAt,\n  bookingDisabled,\n})\n","import { DataProvider, GetOneParams, GetOneResult } from 'react-admin'\nimport {\n  BOOKINGS_URL,\n  CUSTOMERS_URL,\n  EVENTS_URL,\n  TICKETS_URL,\n  VARIANTS_URL,\n} from '../api-urls'\nimport { get, getByConditions } from '../common/fetch.utils'\nimport { BookingDto } from '../dto/booking.dto'\nimport { TicketDto } from '../dto/ticket.dto'\nimport { CustomerDto } from '../dto/customer.dto'\nimport { EventDto } from '../dto/event.dto'\nimport { buildFilterByIdsCondition } from '../common/condition.builder'\nimport { mapToTicketDetails } from './ticket-details.mapper'\nimport { VariantDto } from '../dto/variant.dto'\nimport { TicketDetails } from './ticket-details'\n\nconst provider = {\n  getOne: async (\n    resource: string,\n    { id: bookingId }: GetOneParams,\n  ): Promise<GetOneResult<TicketDetails>> => {\n    const booking = await get<BookingDto>(BOOKINGS_URL, `/${bookingId}`)\n    const { customerId, eventId, variantId } = booking\n    const pendingCustomer = get<CustomerDto>(CUSTOMERS_URL, `/${customerId}`)\n    const pendingEvent = get<EventDto>(EVENTS_URL, `/${eventId}`)\n    const pendingVariant = get<VariantDto>(VARIANTS_URL, `/${variantId}`)\n    const pendingTickets = getByConditions<TicketDto>(\n      TICKETS_URL,\n      buildFilterByIdsCondition(booking.ticketsIds),\n    )\n\n    const [customer, event, variant, tickets] = await Promise.all([\n      pendingCustomer,\n      pendingEvent,\n      pendingVariant,\n      pendingTickets,\n    ])\n\n    return {\n      data: mapToTicketDetails(booking, customer, event, variant, tickets),\n    }\n  },\n} as DataProvider\n\nexport default provider\n","import { DataProvider, sanitizeFetchType } from 'react-admin'\nimport ticketInfoProvider from './ticket-info/ticket-info.provider'\nimport { ResourceName } from './ResourceName'\nimport ticketsProvider from './tickets/tickets-provider'\nimport ticketDetailsProvider from './ticket-info/ticket-details.provider'\n\nconst dataProviders: Record<ResourceName, DataProvider> = {\n  [ResourceName.TICKETS]: ticketsProvider,\n  [ResourceName.TICKET_INFO]: ticketInfoProvider,\n  [ResourceName.TICKET_DETAILS]: ticketDetailsProvider,\n}\n\nexport default (\n  fetchType: string,\n  resource: string,\n  params: unknown,\n): Promise<unknown> => {\n  const selectedProvider = dataProviders[resource as ResourceName]\n  const type = sanitizeFetchType(fetchType)\n  return selectedProvider[type](resource, params)\n}\n","import * as React from 'react'\nimport { TextField, TextFieldProps, useRecordContext } from 'react-admin'\nimport { maskMiddlePart } from '../../core/common/mask.utils'\n\nexport const MaskField = ({ source, ...rest }: TextFieldProps) => {\n  const record = useRecordContext()\n  const recordWithMappedValue = {\n    ...record,\n    [source as string]: maskMiddlePart(record[source as string], 2),\n  }\n  return <TextField {...rest} record={recordWithMappedValue} source={source} />\n}\n","/**\n * @example\n * maskMiddlePart('importantValue', 3) === 'imp********lue'\n */\nexport const maskMiddlePart = (word: string, threshold: number) => {\n  const firstChars = word.substring(0, threshold)\n  const lastChars = word.slice(-threshold)\n  const restCharsLength = word.length - firstChars.length - lastChars.length\n  return `${firstChars}${'*'.repeat(\n    restCharsLength > 0 ? restCharsLength : 0,\n  )}${lastChars}`\n}\n","import * as React from 'react'\nimport { Datagrid, List, TextField, useListContext } from 'react-admin'\nimport { useLocation } from 'react-router-dom'\nimport { Box, Divider, ListProps, Typography } from '@material-ui/core'\nimport { FindUserByTicket } from './FindUserByTicket'\nimport { MaskField } from './common/MaskField'\nimport { ResourceName } from '../core/ResourceName'\n\nconst TicketList = () => {\n  const {\n    filterValues: { ticketCode },\n  } = useListContext()\n  return (\n    <>\n      <Box m={2}>\n        <Typography variant=\"h5\" paragraph>\n          Wyszukiwanie biletu po kodzie: {ticketCode}\n        </Typography>\n      </Box>\n      <Divider />\n      <Datagrid rowClick={(id) => `${ResourceName.TICKET_DETAILS}/${id}/show`}>\n        <TextField label=\"Imię\" source=\"firstname\" sortable={false} />\n        <TextField label=\"Nazwisko\" source=\"lastname\" sortable={false} />\n        <MaskField label=\"Pesel\" source=\"pesel\" sortable={false} />\n        <TextField label=\"Bilet\" source=\"ticketCode\" sortable={false} />\n        <TextField label=\"Wydarzenie\" source=\"eventName\" sortable={false} />\n      </Datagrid>\n    </>\n  )\n}\n\n// TODO: Disable table when searching again\nexport const TicketInfoList = (props: ListProps) => {\n  const { search } = useLocation()\n  return (\n    <>\n      <FindUserByTicket />\n      {!!search && (\n        <List actions={false} pagination={false} {...props}>\n          <TicketList />\n        </List>\n      )}\n    </>\n  )\n}\n","import * as React from 'react'\nimport { Button, createStyles, makeStyles, Theme } from '@material-ui/core'\nimport { useRefresh } from 'react-admin'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    button: {\n      color: theme.palette.common.white,\n      marginLeft: theme.spacing(1),\n    },\n  }),\n)\n\nexport const AccessButtons = () => {\n  const classes = useStyles()\n  const refresh = useRefresh()\n\n  const handleClick = () => {\n    // set loading\n    // call to backend\n    refresh()\n  }\n  return (\n    <>\n      <Button\n        disabled\n        className={classes.button}\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={handleClick}\n      >\n        Oznacz dostęp jako wykorzystany\n      </Button>\n      <Button\n        disabled\n        className={classes.button}\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={handleClick}\n      >\n        Zablokuj\n      </Button>\n    </>\n  )\n}\n","import { TicketType } from '../enum/TicketType'\nimport { BookingType } from '../enum/BookingType'\n\nconst bookingTypeMapping: Record<BookingType, string> = {\n  [BookingType.NORMAL]: 'Bilet pojedynczy',\n  [BookingType.AB]: 'Abonament',\n  [BookingType.INFIX]: 'Infix',\n  [BookingType.POINTS]: 'Points',\n  [BookingType.SERVICE]: 'Service',\n}\n\nconst ticketTypeMapping: Record<TicketType, string> = {\n  [TicketType.K]: 'Kod kreskowy',\n  [TicketType.M]: 'Nr mifare',\n  [TicketType.Z]: 'Nr dowodu',\n  [TicketType.N]: 'Nr biletu',\n  [TicketType.P]: 'Pesel',\n  [TicketType.U]: 'Nr unique (125k)',\n  [TicketType.R]: 'Nr rejestracyjny',\n}\n\nexport const mapFromTicketType = (ticketType: TicketType): string =>\n  ticketTypeMapping[ticketType]\n\nexport const mapFromBookingType = (bookingType: BookingType): string =>\n  bookingTypeMapping[bookingType]\n","import * as React from 'react'\nimport {\n  ChipField,\n  ChipFieldProps,\n  DateField,\n  Labeled,\n  Show,\n  ShowProps,\n  Tab,\n  TabbedShowLayout,\n  TextField,\n  TextFieldProps,\n  useRecordContext,\n  useShowContext,\n} from 'react-admin'\nimport {\n  Box,\n  createStyles,\n  Divider,\n  makeStyles,\n  Paper,\n  Theme,\n  Typography,\n} from '@material-ui/core'\nimport { TicketDetails } from '../core/ticket-info/ticket-details'\nimport { AccessButtons } from './AccessButtons'\nimport {\n  mapFromBookingType,\n  mapFromTicketType,\n} from '../core/ticket-info/ticket-info-values.mapper'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    header: {\n      letterSpacing: theme.spacing(0.2),\n    },\n    ticketBox: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: theme.spacing(1),\n      marginLeft: theme.spacing(1),\n    },\n    ticketField: {\n      padding: theme.spacing(0),\n      margin: theme.spacing(0),\n      marginBottom: theme.spacing(0.5),\n    },\n  }),\n)\n\nconst Header = () => {\n  const classes = useStyles()\n  const { record } = useShowContext<TicketDetails>()\n  return (\n    <Box m={2}>\n      <Typography className={classes.header} variant=\"h5\" paragraph>\n        {record?.firstname} {record?.lastname}\n      </Typography>\n    </Box>\n  )\n}\n\nconst MappedChipField = <T extends unknown>({\n  mapper,\n  source,\n  ...rest\n}: ChipFieldProps & { mapper: (value: T) => string }) => {\n  const record = useRecordContext<TicketDetails>()\n  const mappedValue = mapper(record[source as string])\n  const recordWithMappedValue = {\n    ...record,\n    [source as string]: mappedValue,\n  }\n  return (\n    <ChipField {...rest} record={recordWithMappedValue} source=\"bookingType\" />\n  )\n}\n\nconst TicketsField = ({ label }: TextFieldProps) => {\n  const classes = useStyles()\n  const record = useRecordContext<TicketDetails>()\n  const mappedRecords = (record.tickets || []).map(\n    ({ id, ticketType, createdAt }) => ({\n      id,\n      ticketType: mapFromTicketType(ticketType),\n      createdAt,\n    }),\n  )\n  const fields = mappedRecords.map((mappedRecord) => (\n    <Paper\n      key={mappedRecord.id}\n      variant=\"elevation\"\n      className={classes.ticketBox}\n    >\n      <Labeled className={classes.ticketField} label=\"id\">\n        <TextField\n          className={classes.ticketField}\n          record={mappedRecord}\n          source=\"id\"\n        />\n      </Labeled>\n      <Labeled className={classes.ticketField} label=\"Typ wejściówki\">\n        <ChipField\n          className={classes.ticketField}\n          record={mappedRecord}\n          source=\"ticketType\"\n        />\n      </Labeled>\n      <Labeled className={classes.ticketField} label=\"Utworzono\">\n        <DateField\n          className={classes.ticketField}\n          record={mappedRecord}\n          source=\"createdAt\"\n          showTime\n        />\n      </Labeled>\n    </Paper>\n  ))\n  return (\n    <Labeled label={label}>\n      <Box display=\"flex\" flexWrap=\"wrap\" flexDirection=\"row\">\n        {fields}\n      </Box>\n    </Labeled>\n  )\n}\n\n// TODO: handle buttons events\n// TODO: simple view for logs with only one filter\nexport const TicketDetailsView = (props: ShowProps) => (\n  <>\n    <Show {...props}>\n      <>\n        <Header />\n        <Divider />\n        <TabbedShowLayout syncWithLocation={false}>\n          <Tab label=\"Bilet\">\n            <TextField label=\"Impreza\" source=\"eventName\" />\n            <TextField label=\"Pesel\" source=\"pesel\" />\n            <TextField label=\"Wariant\" source=\"variantName\" />\n            <Labeled label=\"Rodzaj wejściówki\">\n              <MappedChipField\n                source=\"bookingType\"\n                mapper={mapFromBookingType}\n              />\n            </Labeled>\n            <DateField\n              label=\"Aktywny od\"\n              source=\"activeFrom\"\n              emptyText=\"N/A\"\n              showTime\n            />\n            <DateField\n              label=\"Aktywny do\"\n              source=\"activeTo\"\n              emptyText=\"N/A\"\n              showTime\n            />\n            <TicketsField label=\"Wejściówki:\" />\n            <DateField label=\"Utworzono\" source=\"createdAt\" showTime />\n            <DateField label=\"Zmodyfikowano\" source=\"modifiedAt\" showTime />\n          </Tab>\n        </TabbedShowLayout>\n        <Divider />\n        <Box p={1} display=\"flex\" justifyContent=\"flex-end\">\n          <AccessButtons />\n        </Box>\n      </>\n    </Show>\n  </>\n)\n","import React from 'react'\nimport ReceiptIcon from '@material-ui/icons/Receipt'\nimport { Admin, Resource } from 'react-admin'\nimport { Dashboard } from './main/Dashboard'\nimport { customTheme } from './custom.theme'\nimport { providersFactory } from './core/providers.factory'\nimport { TicketInfoList } from './main/TicketInfoList'\nimport { TicketDetailsView } from './main/TicketDetailsView'\nimport { ResourceName } from './core/ResourceName'\n\n// TODO: merge customers and products view\n// TODO: chage dashboard name - https://stackoverflow.com/questions/59879156/react-admin-how-to-change-the-dashboard-name-in-the-menu/59880647#59880647\n// TODO: create browser router - https://marmelab.com/react-admin/Admin.html#history\n// TODO: multiple results DDEAF42C\nconst App = () => {\n  const { authProvider, dataProvider } = providersFactory(process.env.NODE_ENV)\n  return (\n    <Admin\n      theme={customTheme}\n      dashboard={Dashboard}\n      authProvider={authProvider}\n      dataProvider={dataProvider}\n    >\n      <Resource\n        options={{ label: 'Bilety' }}\n        icon={ReceiptIcon}\n        name={ResourceName.TICKET_INFO}\n        list={TicketInfoList}\n      />\n      <Resource\n        options={{ label: 'Wejściówka' }}\n        name={ResourceName.TICKET_DETAILS}\n        show={TicketDetailsView}\n      />\n    </Admin>\n  )\n}\n\nexport default App\n","import { AuthProvider, DataProvider, LegacyDataProvider } from 'react-admin'\nimport fakeDataProvider from './fake/fake-data.provider'\nimport fakeAuthProvider from './fake/fake-auth.provider'\nimport authProvider from './auth/auth.provider'\nimport dataProvider from './data.provider'\n\ninterface Providers {\n  readonly authProvider: AuthProvider\n  readonly dataProvider: DataProvider | LegacyDataProvider\n}\n\n// TODO: https://marmelab.com/react-admin/DataProviders.html#using-the-data-provider-in-components\n// TODO: change to real data\nexport const providersFactory = (\n  env: 'development' | 'test' | 'production',\n): Providers => {\n  switch (env) {\n    case 'production':\n      return {\n        authProvider,\n        dataProvider,\n      }\n    case 'development':\n      return {\n        authProvider,\n        dataProvider,\n      }\n    default:\n      return {\n        authProvider: fakeAuthProvider,\n        dataProvider: fakeDataProvider,\n      }\n  }\n}\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}